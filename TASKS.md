# مهام تطبيق the-copy

هذا الملف يوضح أبرز المهام التي ينفذها تطبيق **the-copy** مع شرح مختصر لكل مهمة.

## ١. إدارة المستخدمين والمصادقة
توفر الواجهة الخلفية مسارات للتسجيل وتسجيل الدخول وتجديد الجلسات باستخدام JSON Web Tokens لحماية البيانات وحفظ صلاحيات المستخدمين.

## ٢. تحرير السيناريوهات
واجهة React تتضمن محرر نصوص يعتمد على Tiptap يسمح بكتابة السيناريوهات العربية وتنسيقها بأسلوب احترافي مناسب للصناعة.

## ٣. توليد النصوص بالذكاء الاصطناعي
يستدعي التطبيق واجهة `/api/llm/generate` لدمج نماذج Gemini وإنتاج اقتراحات وحوارات جديدة بناءً على محتوى السيناريو.

## ٤. تصدير السيناريوهات إلى ملفات PDF
يستخدم خادم Node.js طوابير BullMQ وPuppeteer لتوليد ملفات PDF من النصوص، مع تنسيق صفحات السيناريو بشكل تلقائي.

## ٥. مراقبة الحالة الصحية للنظام
يوفر المسار `/api/health` تقارير فورية عن حالة قاعدة البيانات وRedis والذاكرة لضمان استقرار الخدمة ومتابعة الأداء.

## ٦. فرض سياسات الأمان
تُطبق سياسات أمان متعددة مثل Helmet وCORS وRate Limiting لحماية الواجهة الخلفية من الهجمات الشائعة وضبط نطاقات الوصول.

## ٧. تسجيل الأحداث وتتبع الأخطاء
يستخدم التطبيق مكتبة Pino لتخزين السجلات بشكل منظم، مما يسهل تتبع الأخطاء وتحليل الأداء في بيئات التطوير والإنتاج.

## ٨. إدارة قاعدة البيانات مع RLS
تعتمد قاعدة بيانات PostgreSQL على سياسات Row-Level Security ووظيفة `current_user_id()` لضمان أن كل مستخدم يرى البيانات الخاصة به فقط.

## ٩. تشغيل مهام الخلفية ومعالجة الطوابير
تتعامل العمال (workers) مع المهام غير المتزامنة مثل تصدير الملفات، مما يحافظ على سرعة استجابة الخادم الرئيسي.

## ١٠. تقديم الواجهة الأمامية الجاهزة
عند بناء المشروع تُقدَّم ملفات React الجاهزة من خلال Express، مما يسمح بنشر التطبيق كحزمة واحدة متكاملة.

